# 📌 Endpoint: `GET /api/blog/v1/blogs/`

### 🎯 کاربرد:

این API برای دریافت لیست تمام مقالات استفاده می‌شود. نتایج به صورت صفحه‌بندی شده و شامل اطلاعات کامل هر مقاله است.

> این endpoint نیاز به **احراز هویت ندارد** و همه کاربران می‌توانند از آن استفاده کنند. اما برای عملیات های مدیریتی باید ادمین باشد

---

## 📋 شرایط استفاده

* 🔓 **دسترسی عمومی** - نیاز به احراز هویت ندارد
* 📄 نتایج **صفحه‌بندی شده** (۵ مقاله در هر صفحه)ؤ
* 🔍 قابلیت **جستجو** در عنوان مقالات
* 🚦 این endpoint تحت **محدودیت نرخ (Rate Limiting)** است

---

## 🔐 سطح دسترسی

| شرط                          | وضعیت                        |
| ---------------------------- | ---------------------------- |
| نیاز به لاگین؟               | ❌ خیر                        |
| نیاز به دسترسی Staff؟        | ❌ خیر                        |
| محدودیت نرخ (Throttle) فعال؟ | ✅ بله                        |

---

## 📨 درخواست

### ➤ Method: `GET`

### ➤ URL: `/api/blog/v1/blogs/`

---

### Query Parameters

| پارامتر   | نوع    | الزامی؟ | توضیح                                    |
| --------- | ------ | ------- | ---------------------------------------- |
| `search`  | string | ❌       | جستجو در عنوان مقالات                   |
| `page`    | number | ❌       | شماره صفحه (پیش‌فرض: 1)                |

### نمونه درخواست با جستجو:
```
GET /api/blog/v1/blogs/?search=Django&page=1
```

---

## ✅ پاسخ موفق

### ✔️ Status Code: `200 OK`

```json
{
  "count": 25,
  "next": "http://example.com/api/blog/v1/blogs/?page=2",
  "previous": null,
  "results": [
    {
      "id": 1,
      "title": "آموزش Django REST Framework",
      "slug": "django-rest-framework-tutorial",
      "content": "<p>در این مقاله به آموزش Django REST Framework می‌پردازیم...</p>",
      "image": "http://example.com/media/blog_images/django-tutorial.jpg",
      "author": "مدیر سیستم",
      "created_at": "2024-01-15T10:30:00Z",
      "updated_at": "2024-01-15T10:30:00Z"
    },
    {
      "id": 2,
      "title": "مقدمه‌ای بر React",
      "slug": "react-introduction",
      "content": "<p>React یکی از محبوب‌ترین کتابخانه‌های JavaScript است...</p>",
      "image": "http://example.com/media/blog_images/react-intro.jpg",
      "author": "مدیر سیستم",
      "created_at": "2024-01-14T09:15:00Z",
      "updated_at": "2024-01-14T09:15:00Z"
    }
  ]
}
```

| فیلد       | نوع    | توضیح                                           |
| ---------- | ------ | ----------------------------------------------- |
| `count`    | number | تعداد کل مقالات                                 |
| `next`     | string | لینک صفحه بعدی (null اگر وجود نداشته باشد)     |
| `previous` | string | لینک صفحه قبلی (null اگر وجود نداشته باشد)     |
| `results`  | array  | آرایه مقالات صفحه فعلی                         |

### 🔄 نمونه پاسخ لیست خالی:

```json
{
  "count": 0,
  "next": null,
  "previous": null,
  "results": []
}
```

---

## ❌ پاسخ‌های خطا

| کد وضعیت | توضیح                                | نمونه پاسخ                                                                                                      |
| -------- | ------------------------------------ | --------------------------------------------------------------------------------------------------------------- |
| `500`    | خطای داخلی سرور یا مشکل غیرمنتظره    | `{ "detail": "خطای ناشناخته‌ای رخ داده است. لطفاً دوباره تلاش کنید." }`                                         |

---

# 📌 Endpoint: `GET /api/blog/v1/blogs/{slug}/`

### 🎯 کاربرد:

این API برای دریافت جزئیات کامل یک مقاله خاص استفاده می‌شود. مقاله با استفاده از slug شناسایی می‌شود.

> این endpoint نیاز به **احراز هویت ندارد** و همه کاربران می‌توانند از آن استفاده کنند.

---

## 📋 شرایط استفاده

* 🔓 **دسترسی عمومی** - نیاز به احراز هویت ندارد
* 🔗 استفاده از **slug** به جای ID برای شناسایی
* 📝 بازگرداندن **محتوای کامل** مقاله با فرمت HTML
* 🚦 این endpoint تحت **محدودیت نرخ (Rate Limiting)** است

---

## 🔐 سطح دسترسی

| شرط                          | وضعیت                        |
| ---------------------------- | ---------------------------- |
| نیاز به لاگین؟               | ❌ خیر                        |
| نیاز به دسترسی Staff؟        | ❌ خیر                        |
| محدودیت نرخ (Throttle) فعال؟ | ✅ بله                        |

---

## 📨 درخواست

### ➤ Method: `GET`

### ➤ URL: `/api/blog/v1/blogs/{slug}/`

### نمونه درخواست:
```
GET /api/blog/v1/blogs/django-rest-framework-tutorial/
```

---

## ✅ پاسخ موفق

### ✔️ Status Code: `200 OK`

```json
{
  "id": 1,
  "title": "آموزش Django REST Framework",
  "slug": "django-rest-framework-tutorial",
  "content": "<p>در این مقاله به آموزش کامل Django REST Framework می‌پردازیم. ابتدا با مفاهیم پایه آشنا می‌شویم...</p>",
  "image": "http://example.com/media/blog_images/django-tutorial.jpg",
  "author": "مدیر سیستم",
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z"
}
```

| فیلد         | نوع    | توضیح                                           |
| ------------ | ------ | ----------------------------------------------- |
| `id`         | number | شناسه یکتای مقاله                               |
| `title`      | string | عنوان مقاله                                     |
| `slug`       | string | نامک مقاله (URL-friendly)                      |
| `content`    | string | محتوای کامل مقاله (HTML)                       |
| `image`      | string | URL تصویر مقاله                                |
| `author`     | string | نام نویسنده مقاله                              |
| `created_at` | string | تاریخ ایجاد مقاله (ISO 8601)                   |
| `updated_at` | string | تاریخ آخرین ویرایش مقاله (ISO 8601)            |

---

## ❌ پاسخ‌های خطا

| کد وضعیت | توضیح                                | نمونه پاسخ                                                                                                      |
| -------- | ------------------------------------ | --------------------------------------------------------------------------------------------------------------- |
| `404`    | مقاله مورد نظر یافت نشد             | `{ "detail": "صفحه مورد نظر یافت نشد." }`                                                                     |
| `500`    | خطای داخلی سرور یا مشکل غیرمنتظره    | `{ "detail": "خطای ناشناخته‌ای رخ داده است. لطفاً دوباره تلاش کنید." }`                                         |

---

# 📌 Endpoint: `POST /api/blog/v1/blogs/`

### 🎯 کاربرد:

این API برای ایجاد مقاله جدید توسط ادمین استفاده می‌شود. مقاله با عنوان، محتوا و تصویر ایجاد می‌شود.

> این endpoint نیاز به **دسترسی ادمین** دارد و فقط کاربران با سطح دسترسی staff می‌توانند از آن استفاده کنند.

---

## 📋 شرایط استفاده

* ✅ فقط کاربران **(admin/staff)** مجاز به استفاده هستند
* ✅ عنوان مقاله باید **یکتا** و حداکثر **200 کاراکتر** باشد
* ✅ محتوای مقاله **الزامی** است و از فرمت HTML پشتیبانی می‌کند
* ✅ تصویر مقاله **الزامی** است و حجم آن باید کمتر از **5 مگابایت** باشد
* 🔗 **Slug** به صورت خودکار از عنوان تولید می‌شود
* 👤 **نویسنده** به صورت خودکار به کاربر فعلی تنظیم می‌شود
* 🚦 این endpoint تحت **محدودیت نرخ (Rate Limiting)** است

---

## 🔐 سطح دسترسی

| شرط                          | وضعیت                        |
| ---------------------------- | ---------------------------- |
| نیاز به لاگین؟               | ✅ بله (کاربران ادمین)        |
| نیاز به دسترسی Staff؟        | ✅ بله                        |
| محدودیت نرخ (Throttle) فعال؟ | ✅ بله                        |

---

## 📨 درخواست

### ➤ Method: `POST`

### ➤ URL: `/api/blog/v1/blogs/`

---

### Headers

| کلید          | مقدار              |
| ------------- | ------------------ |
| Content-Type  | `multipart/form-data` |
| Authorization | `Bearer YOUR_TOKEN` |

---

### Body (`multipart/form-data`)

```json
{
  "title": "آموزش Python برای مبتدیان",
  "content": "<p>Python یکی از محبوب‌ترین زبان‌های برنامه‌نویسی است که به دلیل سادگی و قدرت بالا...</p>",
  "image": "[FILE]"
}
```

| فیلد      | نوع    | الزامی؟ | توضیح                                           |
| --------- | ------ | ------- | ----------------------------------------------- |
| `title`   | string | ✅       | عنوان مقاله (حداکثر 200 کاراکتر، یکتا)         |
| `content` | string | ✅       | محتوای مقاله (HTML)                            |
| `image`   | file   | ✅       | تصویر مقاله (حداکثر 5 مگابایت)                 |

---

## ✅ پاسخ موفق

### ✔️ Status Code: `201 Created`

```json
{
  "message": "مقاله با موفقیت ایجاد شد",
  "data": {
    "id": 3,
    "title": "آموزش Python برای مبتدیان",
    "slug": "python-tutorial-for-beginners",
    "content": "<p>Python یکی از محبوب‌ترین زبان‌های برنامه‌نویسی است...</p>",
    "image": "http://example.com/media/blog_images/python-tutorial.jpg",
    "author": "مدیر سیستم",
    "created_at": "2024-01-16T14:20:00Z",
    "updated_at": "2024-01-16T14:20:00Z"
  }
}
```

---

## ❌ پاسخ‌های خطا

| کد وضعیت | توضیح                                | نمونه پاسخ                                                                                                      |
| -------- | ------------------------------------ | --------------------------------------------------------------------------------------------------------------- |
| `400`    | خطاهای اعتبارسنجی                   | 👇 نمونه‌ها در ادامه                                                                                            |
| `401`    | کاربر احراز هویت نشده               | `{ "detail": "Authentication credentials were not provided." }`                                                 |
| `403`    | کاربر دسترسی ادمین ندارد            | `{ "detail": "شما به این بخش دسترسی ندارید." }`                                                               |
| `500`    | خطای داخلی سرور یا مشکل غیرمنتظره    | `{ "detail": "خطای ناشناخته‌ای رخ داده است. لطفاً دوباره تلاش کنید." }`                                         |

---

### 📉 نمونه پاسخ 400

#### ❗ عنوان تکراری:

```json
{
  "title": ["مقاله‌ای با این عنوان قبلاً ثبت شده است."]
}
```

#### ❗ عنوان خالی:

```json
{
  "title": ["عنوان مقاله نمی تواند خالی باشد."]
}
```

#### ❗ عنوان طولانی:

```json
{
  "title": ["عنوان مقاله نمی تواند بیشتر از ۲۰۰ کاراکتر باشد."]
}
```

#### ❗ محتوا خالی:

```json
{
  "content": ["محتوای مقاله نمی تواند خالی باشد."]
}
```

#### ❗ تصویر خالی:

```json
{
  "image": ["تصویر مقاله نمی تواند خالی باشد."]
}
```

#### ❗ تصویر نامعتبر:

```json
{
  "image": ["فایل تصویر معتبر نیست. لطفاً یک تصویر معتبر انتخاب کنید."]
}
```

#### ❗ حجم تصویر زیاد:

```json
{
  "image": ["حجم تصویر باید کمتر از ۵ مگابایت باشد."]
}
```

---

# 📌 Endpoint: `PUT/PATCH /api/blog/v1/blogs/{slug}/`

### 🎯 کاربرد:

این API برای ویرایش مقاله موجود توسط ادمین استفاده می‌شود. امکان ویرایش جزئی (PATCH) و کامل (PUT) وجود دارد.

> این endpoint نیاز به **دسترسی ادمین** دارد و فقط کاربران با سطح دسترسی staff می‌توانند مقالات را ویرایش کنند.

---

## 📋 شرایط استفاده

* ✅ فقط کاربران **(admin/staff)** مجاز به استفاده هستند
* 🔗 استفاده از **slug** برای شناسایی مقاله
* 📝 تمام فیلدها برای ویرایش جزئی **اختیاری** هستند
* ✅ یکتایی عنوان بررسی می‌شود (به جز مقاله فعلی)
* ✅ حجم تصویر باید کمتر از **5 مگابایت** باشد
* 🕒 تاریخ ویرایش به صورت خودکار به‌روزرسانی می‌شود
* 🚦 این endpoint تحت **محدودیت نرخ (Rate Limiting)** است

---

## 🔐 سطح دسترسی

| شرط                          | وضعیت                        |
| ---------------------------- | ---------------------------- |
| نیاز به لاگین؟               | ✅ بله (کاربران ادمین)        |
| نیاز به دسترسی Staff؟        | ✅ بله                        |
| محدودیت نرخ (Throttle) فعال؟ | ✅ بله                        |

---

## 📨 درخواست

### ➤ Method: `PUT` یا `PATCH`

### ➤ URL: `/api/blog/v1/blogs/{slug}/`

---

### Headers

| کلید          | مقدار              |
| ------------- | ------------------ |
| Content-Type  | `multipart/form-data` |
| Authorization | `Bearer YOUR_TOKEN` |

---

### Body (`multipart/form-data`)

```json
{
  "title": "آموزش کامل Django REST Framework",
  "content": "<p>در این مقاله به آموزش کامل و جامع Django REST Framework می‌پردازیم...</p>",
  "image": "[FILE]"
}
```

| فیلد      | نوع    | الزامی؟ | توضیح                                           |
| --------- | ------ | ------- | ----------------------------------------------- |
| `title`   | string | ❌       | عنوان مقاله (حداکثر 200 کاراکتر، یکتا)         |
| `content` | string | ❌       | محتوای مقاله (HTML)                            |
| `image`   | file   | ❌       | تصویر مقاله (حداکثر 5 مگابایت)                 |

### نمونه درخواست:
```
PATCH /api/blog/v1/blogs/django-rest-framework-tutorial/
```

---

## ✅ پاسخ موفق

### ✔️ Status Code: `200 OK`

```json
{
  "message": "مقاله با موفقیت ویرایش شد",
  "data": {
    "id": 1,
    "title": "آموزش کامل Django REST Framework",
    "slug": "django-rest-framework-tutorial",
    "content": "<p>در این مقاله به آموزش کامل و جامع Django REST Framework می‌پردازیم...</p>",
    "image": "http://example.com/media/blog_images/django-tutorial-updated.jpg",
    "author": "مدیر سیستم",
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-16T15:45:00Z"
  }
}
```

---

## ❌ پاسخ‌های خطا

| کد وضعیت | توضیح                                | نمونه پاسخ                                                                                                      |
| -------- | ------------------------------------ | --------------------------------------------------------------------------------------------------------------- |
| `400`    | خطاهای اعتبارسنجی                   | 👇 نمونه‌ها در ادامه                                                                                            |
| `401`    | کاربر احراز هویت نشده               | `{ "detail": "Authentication credentials were not provided." }`                                                 |
| `403`    | کاربر دسترسی ادمین ندارد            | `{ "detail": "شما به این بخش دسترسی ندارید." }`                                                               |
| `404`    | مقاله مورد نظر یافت نشد             | `{ "detail": "صفحه مورد نظر یافت نشد." }`                                                                     |
| `500`    | خطای داخلی سرور یا مشکل غیرمنتظره    | `{ "detail": "خطای ناشناخته‌ای رخ داده است. لطفاً دوباره تلاش کنید." }`                                         |

---

### 📉 نمونه پاسخ 400

#### ❗ عنوان تکراری:

```json
{
  "title": ["مقاله‌ای با این عنوان قبلاً ثبت شده است."]
}
```

#### ❗ حجم تصویر زیاد:

```json
{
  "image": ["حجم تصویر باید کمتر از ۵ مگابایت باشد."]
}
```

---

# 📌 Endpoint: `DELETE /api/blog/v1/blogs/{slug}/`

### 🎯 کاربرد:

این API برای حذف مقاله موجود توسط ادمین استفاده می‌شود. حذف به صورت دائمی انجام می‌شود.

> این endpoint نیاز به **دسترسی ادمین** دارد و فقط کاربران با سطح دسترسی staff می‌توانند مقالات را حذف کنند.

---

## 📋 شرایط استفاده

* ✅ فقط کاربران **(admin/staff)** مجاز به استفاده هستند
* 🔗 استفاده از **slug** برای شناسایی مقاله
* ⚠️ حذف به صورت **دائمی** انجام می‌شود
* 🗑️ تصویر مرتبط با مقاله نیز حذف می‌شود
* ❌ امکان **بازگردانی** پس از حذف وجود ندارد
* 🚦 این endpoint تحت **محدودیت نرخ (Rate Limiting)** است

---

## 🔐 سطح دسترسی

| شرط                          | وضعیت                        |
| ---------------------------- | ---------------------------- |
| نیاز به لاگین؟               | ✅ بله (کاربران ادمین)        |
| نیاز به دسترسی Staff؟        | ✅ بله                        |
| محدودیت نرخ (Throttle) فعال؟ | ✅ بله                        |

---

## 📨 درخواست

### ➤ Method: `DELETE`

### ➤ URL: `/api/blog/v1/blogs/{slug}/`

---

### Headers

| کلید          | مقدار              |
| ------------- | ------------------ |
| Authorization | `Bearer YOUR_TOKEN` |

### نمونه درخواست:
```
DELETE /api/blog/v1/blogs/django-rest-framework-tutorial/
```

---

## ✅ پاسخ موفق

### ✔️ Status Code: `204 No Content`

```json
{
  "message": "مقاله با موفقیت حذف شد"
}
```

---

## ❌ پاسخ‌های خطا

| کد وضعیت | توضیح                                | نمونه پاسخ                                                                                                      |
| -------- | ------------------------------------ | --------------------------------------------------------------------------------------------------------------- |
| `401`    | کاربر احراز هویت نشده               | `{ "detail": "Authentication credentials were not provided." }`                                                 |
| `403`    | کاربر دسترسی ادمین ندارد            | `{ "detail": "شما به این بخش دسترسی ندارید." }`                                                               |
| `404`    | مقاله مورد نظر یافت نشد             | `{ "detail": "صفحه مورد نظر یافت نشد." }`                                                                     |
| `500`    | خطای داخلی سرور یا مشکل غیرمنتظره    | `{ "detail": "خطای ناشناخته‌ای رخ داده است. لطفاً دوباره تلاش کنید." }`                                         |

---
