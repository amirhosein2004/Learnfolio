# ๐ Endpoint: `PATCH /api/accounts/v1/profile/update-identity/`

### ๐ฏ ฺฉุงุฑุจุฑุฏ:

ุงู API ุจุฑุง ุดุฑูุน ูุฑุขูุฏ ุชุบุฑ ุงูู ุง ุดูุงุฑู ุชููู ฺฉุงุฑุจุฑ ุงุณุชูุงุฏู ูโุดูุฏ. ุจุณุชู ุจู ููุน ุดูุงุณู ุงุฑุณุงูุ ฺฉ ููฺฉ ุชุฃุฏ (ุจุฑุง ุงูู) ุง ฺฉุฏ OTP (ุจุฑุง ุดูุงุฑู ุชููู) ุงุฑุณุงู ุฎูุงูุฏ ุดุฏ.

> ุงู endpoint ูุงุฒ ุจู **ุงุญุฑุงุฒ ููุช** ุฏุงุฑุฏ ู **ุงููู ูุฑุญูู** ุฏุฑ ูุฑุขูุฏ ุชุบุฑ ุงุทูุงุนุงุช ุชูุงุณ ฺฉุงุฑุจุฑ ุงุณุช.

---

## ๐ ุดุฑุงุท ุงุณุชูุงุฏู

* โ ููุท ฺฉุงุฑุจุฑุงู **(authenticated)** ูุฌุงุฒ ุจู ุงุณุชูุงุฏู ูุณุชูุฏ.
* โ ุดูุงุณู ุฌุฏุฏ ุจุงุฏ **ููุญุตุฑ ุจู ูุฑุฏ** ุจุงุดุฏ (ูุจูุงู ุซุจุช ูุดุฏู).
* โฑ ูพุณ ุงุฒ ุงุฑุณุงู ููููุ ุชุง **ฒ ุฏููู** ุจุฑุง ููุงู ุดูุงุณู ุงูฺฉุงู ุงุฑุณุงู ูุฌุฏุฏ ูุฌูุฏ ูุฏุงุฑุฏ.
* ๐ฆ ุงู endpoint ุชุญุช **ูุญุฏูุฏุช ูุฑุฎ (Rate Limiting)** ุงุณุช.

---

## ๐ ุณุทุญ ุฏุณุชุฑุณ

| ุดุฑุท                          | ูุถุนุช                        |
| ---------------------------- | ---------------------------- |
| ูุงุฒ ุจู ูุงฺฏูุ               | โ ุจูู (ฺฉุงุฑุจุฑุงู ุงุญุฑุงุฒ ููุช ุดุฏู) |
| ูุญุฏูุฏุช ูุฑุฎ (Throttle) ูุนุงูุ | โ ุจูู                        |

---

## ๐จ ุฏุฑุฎูุงุณุช

### โค Method: `PATCH`

### โค URL: `/api/accounts/v1/profile/update-identity/`

---

### Headers

| ฺฉูุฏ          | ููุฏุงุฑ              |
| ------------- | ------------------ |
| Content-Type  | `application/json` |
| Authorization | `Bearer YOUR_TOKEN` |

---

### Body (JSON)

```json
{
  "identity": "newemail@example.com"
}
```

| ููุฏ       | ููุน    | ุงูุฒุงูุ | ุชูุถุญ                                        |
| ---------- | ------ | ------- | -------------------------------------------- |
| `identity` | string | โ       | ุงูู ุง ุดูุงุฑู ููุจุงู ุงุฑุงู (`09xxxxxxxxx`) |

---

## ๐งช ูููููโูุง ูุนุชุจุฑ

#### โ ุฏุฑุฎูุงุณุช ุชุบุฑ ุงูู:

```json
{ 
  "identity": "newemail@example.com" 
}
```

#### โ ุฏุฑุฎูุงุณุช ุชุบุฑ ุดูุงุฑู ุชููู:

```json
{ 
  "identity": "09987654321" 
}
```

---

## โ ูพุงุณุฎ ูููู

### โ๏ธ Status Code: `200 OK`

#### ๐ง ุจุฑุง ุงูู:

```json
{
  "detail": "ููฺฉ ุชุงุฏ ุจู ุงูู ุงุฑุณุงู ุดุฏ",
  "next_url": "/api/v1/accounts/profile/update-email/confirm/",
  "purpose": "update_email"
}
```

#### ๐ฑ ุจุฑุง ุดูุงุฑู ุชููู:

```json
{
  "detail": "ฺฉุฏ ุชุงุฏ ุจู ุดูุงุฑู ุชููู ุงุฑุณุงู ุดุฏ",
  "next_url": "/api/v1/accounts/profile/update-phone/verify/",
  "purpose": "update_phone"
}
```

| ููุฏ       | ุชูุถุญ                                                  |
| ---------- | ------------------------------------------------------ |
| `detail`   | ูพุงู ููููุชโุขูุฒ ุงุฑุณุงู ููฺฉ ุง ฺฉุฏ                      |
| `next_url` | ูุณุฑ ูุฑุญูู ุจุนุฏ ฺฉู ฺฉูุงูุช ุจุงุฏ ฺฉุงุฑุจุฑ ุฑุง ุจู ุขู ูุฏุงุช ฺฉูุฏ |
| `purpose`  | ูุฏู ุนููุงุช (`update_email` ุง `update_phone`)          |

---

## โ ูพุงุณุฎโูุง ุฎุทุง

| ฺฉุฏ ูุถุนุช | ุชูุถุญ                                | ููููู ูพุงุณุฎ                                                                                                      |
| -------- | ------------------------------------ | --------------------------------------------------------------------------------------------------------------- |
| `400`    | ุฎุทุงูุง ุงุนุชุจุงุฑุณูุฌ ุดูุงุณู             | ๐ ูููููโูุง ุฏุฑ ุงุฏุงูู                                                                                            |
| `401`    | ฺฉุงุฑุจุฑ ุงุญุฑุงุฒ ููุช ูุดุฏู               | `{ "detail": "Authentication credentials were not provided." }`                                                 |
| `429`    | ุนุจูุฑ ุงุฒ ุญุฏ ูุฌุงุฒ ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุช        | `{ "detail": "ุดูุง ุจุด ุงุฒ ุญุฏ ูุฌุงุฒ ุฏุฑุฎูุงุณุช ุงุฑุณุงู ฺฉุฑุฏูโุงุฏ.", "available_in_seconds": 42 }`                      |
| `500`    | ุฎุทุง ุฏุงุฎู ุณุฑูุฑ ุง ูุดฺฉู ุบุฑููุชุธุฑู    | `{ "detail": "ุฎุทุง ูุงุดูุงุฎุชูโุง ุฑุฎ ุฏุงุฏู ุงุณุช. ูุทูุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ." }`                                         |

---

### ๐ ููููู ูพุงุณุฎ 400

#### โ ุนุฏู ุงุฑุณุงู ุดูุงุณู:

```json
{
  "identity": ["ูุงุฑุฏ ฺฉุฑุฏู ุงูู ุง ุดูุงุฑู ุชููู ุงูุฒุงู ุงุณุช."]
}
```

#### โ ุดูุงุณู ุฎุงู:

```json
{
  "identity": ["ูุทูุงู ุงูู ุง ุดูุงุฑู ุชููู ุฑุง ูุงุฑุฏ ฺฉูุฏ."]
}
```

#### โ ุงูู ูุงูุนุชุจุฑ:

```json
{
  "identity": ["ุงูู ูุงูุนุชุจุฑ ุงุณุช. ูุทูุงู ฺฉ ุงูู ูุนุชุจุฑ ูุงููุฏ example@example.com ูุงุฑุฏ ฺฉูุฏ."]
}
```

#### โ ุดูุงุฑู ููุจุงู ูุงูุนุชุจุฑ:

```json
{
  "identity": ["ูุฑูุฏ ูุงูุนุชุจุฑ ุงุณุช. ูุทูุงู ฺฉ ุงูู ุง ุดูุงุฑู ุชููู ูุนุชุจุฑ ูุงุฑุฏ ฺฉูุฏ."]
}
```

#### โ ุดูุงุณู ุชฺฉุฑุงุฑ:

```json
{
  "identity": ["ุงู ุงูู ูุจูุงู ุซุจุช ุดุฏู ุงุณุช."]
}
```

---
