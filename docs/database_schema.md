# ساختار دیتابیس

## User
مدل کاربری اصلی سیستم که از `AbstractBaseUser` و `PermissionsMixin` ارث‌بری می‌کند.

### فیلدها:
- `full_name` (CharField): نام کامل کاربر (اختیاری)
- `email` (EmailField): ایمیل کاربر (یکتا، اختیاری)
- `phone_number` (CharField): شماره موبایل (یکتا، اختیاری)
- `is_active` (Boolean): وضعیت فعال بودن حساب کاربری (پیش‌فرض: True)
- `is_staff` (Boolean): دسترسی به پنل مدیریت (پیش‌فرض: False)
- `date_joined` (DateTime): تاریخ و زمان عضویت (به صورت خودکار تنظیم می‌شود)
- `last_login` (DateTime): آخرین زمان ورود کاربر (به‌روزرسانی خودکار)
- `password` (CharField): رمز عبور هش‌شده (به صورت خودکار مدیریت می‌شود)

### محدودیت‌ها:
- ایمیل باید یکتا باشد (در صورت ارائه)
- شماره موبایل باید یکتا باشد (در صورت ارائه)
- حداقل یکی از فیلدهای ایمیل یا شماره موبایل باید پر شود

## AdminProfile
پروفایل مدیریتی برای کاربران دارای دسترسی ادمین

### فیلدها:
- `user` (OneToOneField): ارتباط یک‌به‌یک با مدل User
- `social_networks` (JSONField): شبکه‌های اجتماعی به صورت دیکشنری JSON (پیش‌فرض: {})
- `description` (TextField): توضیحات پروفایل (اختیاری)

## OTP
مدل مدیریت کدهای یکبار مصرف برای احراز هویت

### فیلدها:
- `email` (EmailField): ایمیل دریافت‌کننده کد (اختیاری)
- `phone_number` (CharField): شماره موبایل دریافت‌کننده کد (اختیاری)
- `code` (CharField): کد شش رقمی OTP
- `purpose` (CharField): هدف کد (مقادیر ممکن: login, register, reset)
- `created_at` (DateTime): زمان ایجاد کد (به صورت خودکار تنظیم می‌شود)

### محدودیت‌ها:
- ایندکس ترکیبی روی فیلدهای `email`، `phone_number` و `code` برای جستجوی سریع‌تر
- حداقل یکی از فیلدهای ایمیل یا شماره موبایل باید پر شود

### نکات مهم:
- کدهای OTP به صورت خودکار بعد از ۲ دقیقه منقضی می‌شوند
- امکان بازتولید کد با متد `regenerate()` وجود دارد
- وضعیت انقضای کد با متد `is_expired()` قابل بررسی است
- کدها به صورت تصادفی و امن تولید می‌شوند
